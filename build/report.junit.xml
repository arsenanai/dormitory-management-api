<?xml version="1.0" encoding="UTF-8"?>
<testsuites>
  <testsuite name="/Users/rsa/lab/testcrm/crm-back/phpunit.xml" tests="162" assertions="427" errors="38" failures="12" skipped="0" time="13.687092">
    <testsuite name="Unit" tests="99" assertions="229" errors="34" failures="6" skipped="0" time="9.490218">
      <testsuite name="Tests\Unit\GuestRoomAvailabilityTest" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/GuestRoomAvailabilityTest.php" tests="2" assertions="0" errors="2" failures="0" skipped="0" time="0.917272">
        <testcase name="it_does_not_return_student_rooms_for_guests_by_default" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/GuestRoomAvailabilityTest.php" line="53" class="Tests\Unit\GuestRoomAvailabilityTest" classname="Tests.Unit.GuestRoomAvailabilityTest" assertions="0" time="0.869715">
          <error type="Illuminate\Database\UniqueConstraintViolationException">Tests\Unit\GuestRoomAvailabilityTest::it_does_not_return_student_rooms_for_guests_by_default
Illuminate\Database\UniqueConstraintViolationException: SQLSTATE[23000]: Integrity constraint violation: 19 UNIQUE constraint failed: beds.room_id, beds.bed_number (Connection: sqlite, SQL: insert into "beds" ("room_id", "bed_number", "updated_at", "created_at") values (1, 1, 2026-01-29 13:45:04, 2026-01-29 13:45:04))

/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:821
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:780
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:559
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:523
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/Processor.php:32
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php:3853
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:2235
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1436
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1401
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1240
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:1219
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Support/helpers.php:390
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:1218
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Support/Traits/ForwardsCalls.php:23
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:2540
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:2556
/Users/rsa/lab/testcrm/crm-back/tests/Unit/GuestRoomAvailabilityTest.php:61</error>
        </testcase>
        <testcase name="it_returns_guest_rooms_for_guests" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/GuestRoomAvailabilityTest.php" line="31" class="Tests\Unit\GuestRoomAvailabilityTest" classname="Tests.Unit.GuestRoomAvailabilityTest" assertions="0" time="0.047557">
          <error type="Illuminate\Database\UniqueConstraintViolationException">Tests\Unit\GuestRoomAvailabilityTest::it_returns_guest_rooms_for_guests
Illuminate\Database\UniqueConstraintViolationException: SQLSTATE[23000]: Integrity constraint violation: 19 UNIQUE constraint failed: beds.room_id, beds.bed_number (Connection: sqlite, SQL: insert into "beds" ("room_id", "bed_number", "updated_at", "created_at") values (1, 1, 2026-01-29 13:45:04, 2026-01-29 13:45:04))

/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:821
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:780
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:559
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:523
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/Processor.php:32
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php:3853
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:2235
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1436
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1401
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1240
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:1219
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Support/helpers.php:390
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:1218
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Support/Traits/ForwardsCalls.php:23
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:2540
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:2556
/Users/rsa/lab/testcrm/crm-back/tests/Unit/GuestRoomAvailabilityTest.php:39</error>
        </testcase>
      </testsuite>
      <testsuite name="Tests\Unit\Services\GuestServiceTest" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php" tests="14" assertions="0" errors="14" failures="0" skipped="0" time="0.000000">
        <testcase name="test_get_guests_with_filters_returns_guests_with_relationships" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php" line="82" class="Tests\Unit\Services\GuestServiceTest" classname="Tests.Unit.Services.GuestServiceTest" assertions="0" time="0.000000">
          <error type="ArgumentCountError">Tests\Unit\Services\GuestServiceTest::test_get_guests_with_filters_returns_guests_with_relationships
ArgumentCountError: Too few arguments to function App\Services\GuestService::__construct(), 0 passed in /Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php on line 29 and exactly 2 expected

/Users/rsa/lab/testcrm/crm-back/app/Services/GuestService.php:17
/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php:29</error>
        </testcase>
        <testcase name="test_get_guests_with_filters_filters_by_room_id" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php" line="96" class="Tests\Unit\Services\GuestServiceTest" classname="Tests.Unit.Services.GuestServiceTest" assertions="0" time="0.000000">
          <error type="ArgumentCountError">Tests\Unit\Services\GuestServiceTest::test_get_guests_with_filters_filters_by_room_id
ArgumentCountError: Too few arguments to function App\Services\GuestService::__construct(), 0 passed in /Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php on line 29 and exactly 2 expected

/Users/rsa/lab/testcrm/crm-back/app/Services/GuestService.php:17
/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php:29</error>
        </testcase>
        <testcase name="test_get_guests_with_filters_includes_room_type_beds_data" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php" line="113" class="Tests\Unit\Services\GuestServiceTest" classname="Tests.Unit.Services.GuestServiceTest" assertions="0" time="0.000000">
          <error type="ArgumentCountError">Tests\Unit\Services\GuestServiceTest::test_get_guests_with_filters_includes_room_type_beds_data
ArgumentCountError: Too few arguments to function App\Services\GuestService::__construct(), 0 passed in /Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php on line 29 and exactly 2 expected

/Users/rsa/lab/testcrm/crm-back/app/Services/GuestService.php:17
/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php:29</error>
        </testcase>
        <testcase name="test_create_guest_calculates_daily_rate_correctly" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php" line="126" class="Tests\Unit\Services\GuestServiceTest" classname="Tests.Unit.Services.GuestServiceTest" assertions="0" time="0.000000">
          <error type="ArgumentCountError">Tests\Unit\Services\GuestServiceTest::test_create_guest_calculates_daily_rate_correctly
ArgumentCountError: Too few arguments to function App\Services\GuestService::__construct(), 0 passed in /Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php on line 29 and exactly 2 expected

/Users/rsa/lab/testcrm/crm-back/app/Services/GuestService.php:17
/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php:29</error>
        </testcase>
        <testcase name="test_create_guest_uses_room_type_daily_rate_as_fallback" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php" line="149" class="Tests\Unit\Services\GuestServiceTest" classname="Tests.Unit.Services.GuestServiceTest" assertions="0" time="0.000000">
          <error type="ArgumentCountError">Tests\Unit\Services\GuestServiceTest::test_create_guest_uses_room_type_daily_rate_as_fallback
ArgumentCountError: Too few arguments to function App\Services\GuestService::__construct(), 0 passed in /Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php on line 29 and exactly 2 expected

/Users/rsa/lab/testcrm/crm-back/app/Services/GuestService.php:17
/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php:29</error>
        </testcase>
        <testcase name="test_get_available_rooms_returns_rooms_with_room_type" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php" line="169" class="Tests\Unit\Services\GuestServiceTest" classname="Tests.Unit.Services.GuestServiceTest" assertions="0" time="0.000000">
          <error type="ArgumentCountError">Tests\Unit\Services\GuestServiceTest::test_get_available_rooms_returns_rooms_with_room_type
ArgumentCountError: Too few arguments to function App\Services\GuestService::__construct(), 0 passed in /Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php on line 29 and exactly 2 expected

/Users/rsa/lab/testcrm/crm-back/app/Services/GuestService.php:17
/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php:29</error>
        </testcase>
        <testcase name="test_get_available_rooms_excludes_occupied_rooms" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php" line="181" class="Tests\Unit\Services\GuestServiceTest" classname="Tests.Unit.Services.GuestServiceTest" assertions="0" time="0.000000">
          <error type="ArgumentCountError">Tests\Unit\Services\GuestServiceTest::test_get_available_rooms_excludes_occupied_rooms
ArgumentCountError: Too few arguments to function App\Services\GuestService::__construct(), 0 passed in /Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php on line 29 and exactly 2 expected

/Users/rsa/lab/testcrm/crm-back/app/Services/GuestService.php:17
/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php:29</error>
        </testcase>
        <testcase name="test_export_guests_includes_room_type_data" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php" line="191" class="Tests\Unit\Services\GuestServiceTest" classname="Tests.Unit.Services.GuestServiceTest" assertions="0" time="0.000000">
          <error type="ArgumentCountError">Tests\Unit\Services\GuestServiceTest::test_export_guests_includes_room_type_data
ArgumentCountError: Too few arguments to function App\Services\GuestService::__construct(), 0 passed in /Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php on line 29 and exactly 2 expected

/Users/rsa/lab/testcrm/crm-back/app/Services/GuestService.php:17
/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php:29</error>
        </testcase>
        <testcase name="test_export_guests_filters_by_room_id" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php" line="205" class="Tests\Unit\Services\GuestServiceTest" classname="Tests.Unit.Services.GuestServiceTest" assertions="0" time="0.000000">
          <error type="ArgumentCountError">Tests\Unit\Services\GuestServiceTest::test_export_guests_filters_by_room_id
ArgumentCountError: Too few arguments to function App\Services\GuestService::__construct(), 0 passed in /Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php on line 29 and exactly 2 expected

/Users/rsa/lab/testcrm/crm-back/app/Services/GuestService.php:17
/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php:29</error>
        </testcase>
        <testcase name="test_get_guest_by_id_returns_guest_with_relationships" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php" line="222" class="Tests\Unit\Services\GuestServiceTest" classname="Tests.Unit.Services.GuestServiceTest" assertions="0" time="0.000000">
          <error type="ArgumentCountError">Tests\Unit\Services\GuestServiceTest::test_get_guest_by_id_returns_guest_with_relationships
ArgumentCountError: Too few arguments to function App\Services\GuestService::__construct(), 0 passed in /Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php on line 29 and exactly 2 expected

/Users/rsa/lab/testcrm/crm-back/app/Services/GuestService.php:17
/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php:29</error>
        </testcase>
        <testcase name="test_get_guest_by_id_throws_exception_for_nonexistent_guest" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php" line="234" class="Tests\Unit\Services\GuestServiceTest" classname="Tests.Unit.Services.GuestServiceTest" assertions="0" time="0.000000">
          <error type="ArgumentCountError">Tests\Unit\Services\GuestServiceTest::test_get_guest_by_id_throws_exception_for_nonexistent_guest
ArgumentCountError: Too few arguments to function App\Services\GuestService::__construct(), 0 passed in /Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php on line 29 and exactly 2 expected

/Users/rsa/lab/testcrm/crm-back/app/Services/GuestService.php:17
/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php:29</error>
        </testcase>
        <testcase name="test_update_guest_updates_guest_data" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php" line="241" class="Tests\Unit\Services\GuestServiceTest" classname="Tests.Unit.Services.GuestServiceTest" assertions="0" time="0.000000">
          <error type="ArgumentCountError">Tests\Unit\Services\GuestServiceTest::test_update_guest_updates_guest_data
ArgumentCountError: Too few arguments to function App\Services\GuestService::__construct(), 0 passed in /Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php on line 29 and exactly 2 expected

/Users/rsa/lab/testcrm/crm-back/app/Services/GuestService.php:17
/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php:29</error>
        </testcase>
        <testcase name="test_delete_guest_removes_guest" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php" line="257" class="Tests\Unit\Services\GuestServiceTest" classname="Tests.Unit.Services.GuestServiceTest" assertions="0" time="0.000000">
          <error type="ArgumentCountError">Tests\Unit\Services\GuestServiceTest::test_delete_guest_removes_guest
ArgumentCountError: Too few arguments to function App\Services\GuestService::__construct(), 0 passed in /Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php on line 29 and exactly 2 expected

/Users/rsa/lab/testcrm/crm-back/app/Services/GuestService.php:17
/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php:29</error>
        </testcase>
        <testcase name="test_delete_guest_throws_exception_for_nonexistent_guest" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php" line="265" class="Tests\Unit\Services\GuestServiceTest" classname="Tests.Unit.Services.GuestServiceTest" assertions="0" time="0.000000">
          <error type="ArgumentCountError">Tests\Unit\Services\GuestServiceTest::test_delete_guest_throws_exception_for_nonexistent_guest
ArgumentCountError: Too few arguments to function App\Services\GuestService::__construct(), 0 passed in /Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php on line 29 and exactly 2 expected

/Users/rsa/lab/testcrm/crm-back/app/Services/GuestService.php:17
/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/GuestServiceTest.php:29</error>
        </testcase>
      </testsuite>
      <testsuite name="Tests\Unit\StudentProfileModelTest" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/StudentProfileModelTest.php" tests="7" assertions="37" errors="0" failures="0" skipped="0" time="0.323746">
        <testcase name="test_emergency_contact_fields_are_fillable" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/StudentProfileModelTest.php" line="86" class="Tests\Unit\StudentProfileModelTest" classname="Tests.Unit.StudentProfileModelTest" assertions="11" time="0.058427"/>
        <testcase name="test_student_profile_accepts_all_emergency_contact_types" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/StudentProfileModelTest.php" line="44" class="Tests\Unit\StudentProfileModelTest" classname="Tests.Unit.StudentProfileModelTest" assertions="3" time="0.053153"/>
        <testcase name="test_student_profile_can_be_created_with_emergency_contact_fields" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/StudentProfileModelTest.php" line="14" class="Tests\Unit\StudentProfileModelTest" classname="Tests.Unit.StudentProfileModelTest" assertions="3" time="0.041990"/>
        <testcase name="test_student_profile_does_not_have_old_contact_fields" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/StudentProfileModelTest.php" line="69" class="Tests\Unit\StudentProfileModelTest" classname="Tests.Unit.StudentProfileModelTest" assertions="7" time="0.044422"/>
        <testcase name="test_student_profile_can_be_created_with_identification_fields" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/StudentProfileModelTest.php" line="104" class="Tests\Unit\StudentProfileModelTest" classname="Tests.Unit.StudentProfileModelTest" assertions="3" time="0.043067"/>
        <testcase name="test_student_profile_accepts_all_identification_types" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/StudentProfileModelTest.php" line="130" class="Tests\Unit\StudentProfileModelTest" classname="Tests.Unit.StudentProfileModelTest" assertions="8" time="0.045136"/>
        <testcase name="test_identification_fields_are_fillable" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/StudentProfileModelTest.php" line="159" class="Tests\Unit\StudentProfileModelTest" classname="Tests.Unit.StudentProfileModelTest" assertions="2" time="0.037550"/>
      </testsuite>
      <testsuite name="Tests\Unit\FileServiceTest" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/FileServiceTest.php" tests="15" assertions="45" errors="0" failures="1" skipped="0" time="0.664756">
        <testcase name="it_downloads_files_from_public_disk" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/FileServiceTest.php" line="25" class="Tests\Unit\FileServiceTest" classname="Tests.Unit.FileServiceTest" assertions="1" time="0.079645"/>
        <testcase name="it_returns_404_for_nonexistent_files" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/FileServiceTest.php" line="38" class="Tests\Unit\FileServiceTest" classname="Tests.Unit.FileServiceTest" assertions="3" time="0.044633"/>
        <testcase name="it_validates_files_correctly" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/FileServiceTest.php" line="50" class="Tests\Unit\FileServiceTest" classname="Tests.Unit.FileServiceTest" assertions="2" time="0.038716"/>
        <testcase name="it_handles_uploaded_file_validation" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/FileServiceTest.php" line="61" class="Tests\Unit\FileServiceTest" classname="Tests.Unit.FileServiceTest" assertions="2" time="0.055673"/>
        <testcase name="it_handles_different_file_types" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/FileServiceTest.php" line="73" class="Tests\Unit\FileServiceTest" classname="Tests.Unit.FileServiceTest" assertions="4" time="0.039523"/>
        <testcase name="it_uploads_multiple_files_to_specific_folder" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/FileServiceTest.php" line="93" class="Tests\Unit\FileServiceTest" classname="Tests.Unit.FileServiceTest" assertions="5" time="0.043844"/>
        <testcase name="it_limits_multiple_file_uploads" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/FileServiceTest.php" line="113" class="Tests\Unit\FileServiceTest" classname="Tests.Unit.FileServiceTest" assertions="3" time="0.043389"/>
        <testcase name="it_handles_empty_file_array_upload" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/FileServiceTest.php" line="130" class="Tests\Unit\FileServiceTest" classname="Tests.Unit.FileServiceTest" assertions="1" time="0.038458"/>
        <testcase name="it_deletes_multiple_files" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/FileServiceTest.php" line="141" class="Tests\Unit\FileServiceTest" classname="Tests.Unit.FileServiceTest" assertions="4" time="0.041205"/>
        <testcase name="it_handles_deleting_empty_file_array" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/FileServiceTest.php" line="165" class="Tests\Unit\FileServiceTest" classname="Tests.Unit.FileServiceTest" assertions="1" time="0.037758"/>
        <testcase name="it_handles_deleting_nonexistent_files" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/FileServiceTest.php" line="176" class="Tests\Unit\FileServiceTest" classname="Tests.Unit.FileServiceTest" assertions="1" time="0.038628"/>
        <testcase name="it_replaces_files_with_cleanup" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/FileServiceTest.php" line="190" class="Tests\Unit\FileServiceTest" classname="Tests.Unit.FileServiceTest" assertions="7" time="0.039378"/>
        <testcase name="it_replaces_files_with_empty_array" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/FileServiceTest.php" line="223" class="Tests\Unit\FileServiceTest" classname="Tests.Unit.FileServiceTest" assertions="2" time="0.038654"/>
        <testcase name="it_validates_image_files" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/FileServiceTest.php" line="243" class="Tests\Unit\FileServiceTest" classname="Tests.Unit.FileServiceTest" assertions="4" time="0.042007"/>
        <testcase name="it_validates_image_files_with_size_limit" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/FileServiceTest.php" line="259" class="Tests\Unit\FileServiceTest" classname="Tests.Unit.FileServiceTest" assertions="5" time="0.043245">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Unit\FileServiceTest::it_validates_image_files_with_size_limit
Failed asserting that 'The file field must not be greater than 2048 kilobytes.' [ASCII](length: 55) contains "size" [ASCII](length: 4).

/Users/rsa/lab/testcrm/crm-back/tests/Unit/FileServiceTest.php:272</failure>
        </testcase>
      </testsuite>
      <testsuite name="Tests\Unit\RoomServiceAvailableTest" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomServiceAvailableTest.php" tests="5" assertions="0" errors="5" failures="0" skipped="0" time="0.281963">
        <testcase name="it_returns_only_rooms_with_available_beds_for_students" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomServiceAvailableTest.php" line="42" class="Tests\Unit\RoomServiceAvailableTest" classname="Tests.Unit.RoomServiceAvailableTest" assertions="0" time="0.084301">
          <error type="Illuminate\Database\UniqueConstraintViolationException">Tests\Unit\RoomServiceAvailableTest::it_returns_only_rooms_with_available_beds_for_students
Illuminate\Database\UniqueConstraintViolationException: SQLSTATE[23000]: Integrity constraint violation: 19 UNIQUE constraint failed: beds.room_id, beds.bed_number (Connection: sqlite, SQL: insert into "beds" ("room_id", "bed_number", "is_occupied", "reserved_for_staff", "user_id", "updated_at", "created_at") values (1, 1, 0, 0, ?, 2026-01-29 13:45:06, 2026-01-29 13:45:06))

/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:821
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:780
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:559
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:523
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/Processor.php:32
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php:3853
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:2235
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1436
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1401
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1240
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:1219
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Support/helpers.php:390
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:1218
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Support/Traits/ForwardsCalls.php:23
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:2540
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:2556
/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomServiceAvailableTest.php:75</error>
        </testcase>
        <testcase name="it_returns_empty_collection_when_no_rooms_have_available_beds" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomServiceAvailableTest.php" line="149" class="Tests\Unit\RoomServiceAvailableTest" classname="Tests.Unit.RoomServiceAvailableTest" assertions="0" time="0.047671">
          <error type="Illuminate\Database\UniqueConstraintViolationException">Tests\Unit\RoomServiceAvailableTest::it_returns_empty_collection_when_no_rooms_have_available_beds
Illuminate\Database\UniqueConstraintViolationException: SQLSTATE[23000]: Integrity constraint violation: 19 UNIQUE constraint failed: beds.room_id, beds.bed_number (Connection: sqlite, SQL: insert into "beds" ("room_id", "bed_number", "is_occupied", "reserved_for_staff", "user_id", "updated_at", "created_at") values (1, 1, 1, 0, 201, 2026-01-29 13:45:06, 2026-01-29 13:45:06))

/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:821
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:780
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:559
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:523
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/Processor.php:32
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php:3853
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:2235
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1436
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1401
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1240
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:1219
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Support/helpers.php:390
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:1218
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Support/Traits/ForwardsCalls.php:23
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:2540
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:2556
/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomServiceAvailableTest.php:160</error>
        </testcase>
        <testcase name="it_filters_by_dormitory_id" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomServiceAvailableTest.php" line="184" class="Tests\Unit\RoomServiceAvailableTest" classname="Tests.Unit.RoomServiceAvailableTest" assertions="0" time="0.051889">
          <error type="Illuminate\Database\UniqueConstraintViolationException">Tests\Unit\RoomServiceAvailableTest::it_filters_by_dormitory_id
Illuminate\Database\UniqueConstraintViolationException: SQLSTATE[23000]: Integrity constraint violation: 19 UNIQUE constraint failed: beds.room_id, beds.bed_number (Connection: sqlite, SQL: insert into "beds" ("room_id", "bed_number", "is_occupied", "reserved_for_staff", "user_id", "updated_at", "created_at") values (1, 1, 0, 0, ?, 2026-01-29 13:45:06, 2026-01-29 13:45:06))

/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:821
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:780
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:559
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:523
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/Processor.php:32
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php:3853
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:2235
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1436
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1401
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1240
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:1219
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Support/helpers.php:390
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:1218
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Support/Traits/ForwardsCalls.php:23
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:2540
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:2556
/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomServiceAvailableTest.php:209</error>
        </testcase>
        <testcase name="it_returns_multiple_rooms_with_available_beds" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomServiceAvailableTest.php" line="234" class="Tests\Unit\RoomServiceAvailableTest" classname="Tests.Unit.RoomServiceAvailableTest" assertions="0" time="0.050854">
          <error type="Illuminate\Database\UniqueConstraintViolationException">Tests\Unit\RoomServiceAvailableTest::it_returns_multiple_rooms_with_available_beds
Illuminate\Database\UniqueConstraintViolationException: SQLSTATE[23000]: Integrity constraint violation: 19 UNIQUE constraint failed: beds.room_id, beds.bed_number (Connection: sqlite, SQL: insert into "beds" ("room_id", "bed_number", "is_occupied", "reserved_for_staff", "user_id", "updated_at", "created_at") values (1, 1, 0, 0, ?, 2026-01-29 13:45:06, 2026-01-29 13:45:06))

/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:821
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:780
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:559
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:523
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/Processor.php:32
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php:3853
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:2235
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1436
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1401
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1240
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:1219
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Support/helpers.php:390
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:1218
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Support/Traits/ForwardsCalls.php:23
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:2540
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:2556
/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomServiceAvailableTest.php:252</error>
        </testcase>
        <testcase name="it_includes_room_type_and_dormitory_relationships" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomServiceAvailableTest.php" line="278" class="Tests\Unit\RoomServiceAvailableTest" classname="Tests.Unit.RoomServiceAvailableTest" assertions="0" time="0.047247">
          <error type="Illuminate\Database\UniqueConstraintViolationException">Tests\Unit\RoomServiceAvailableTest::it_includes_room_type_and_dormitory_relationships
Illuminate\Database\UniqueConstraintViolationException: SQLSTATE[23000]: Integrity constraint violation: 19 UNIQUE constraint failed: beds.room_id, beds.bed_number (Connection: sqlite, SQL: insert into "beds" ("room_id", "bed_number", "is_occupied", "reserved_for_staff", "user_id", "updated_at", "created_at") values (1, 1, 0, 0, ?, 2026-01-29 13:45:06, 2026-01-29 13:45:06))

/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:821
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:780
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:559
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:523
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/Processor.php:32
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php:3853
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:2235
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1436
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1401
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1240
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:1219
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Support/helpers.php:390
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:1218
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Support/Traits/ForwardsCalls.php:23
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:2540
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:2556
/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomServiceAvailableTest.php:288</error>
        </testcase>
      </testsuite>
      <testsuite name="Tests\Unit\RoomTypeServiceTest" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomTypeServiceTest.php" tests="9" assertions="18" errors="1" failures="3" skipped="0" time="0.498972">
        <testcase name="it_creates_room_type_without_photos" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomTypeServiceTest.php" line="33" class="Tests\Unit\RoomTypeServiceTest" classname="Tests.Unit.RoomTypeServiceTest" assertions="4" time="0.050421"/>
        <testcase name="it_creates_room_type_with_photos" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomTypeServiceTest.php" line="54" class="Tests\Unit\RoomTypeServiceTest" classname="Tests.Unit.RoomTypeServiceTest" assertions="4" time="0.040029">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Unit\RoomTypeServiceTest::it_creates_room_type_with_photos
Failed asserting that actual size 0 matches expected size 2.

/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomTypeServiceTest.php:79</failure>
        </testcase>
        <testcase name="it_updates_room_type_without_photos" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomTypeServiceTest.php" line="91" class="Tests\Unit\RoomTypeServiceTest" classname="Tests.Unit.RoomTypeServiceTest" assertions="2" time="0.041004"/>
        <testcase name="it_deletes_room_type_without_photos" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomTypeServiceTest.php" line="110" class="Tests\Unit\RoomTypeServiceTest" classname="Tests.Unit.RoomTypeServiceTest" assertions="1" time="0.040433"/>
        <testcase name="it_deletes_room_type_with_photos" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomTypeServiceTest.php" line="127" class="Tests\Unit\RoomTypeServiceTest" classname="Tests.Unit.RoomTypeServiceTest" assertions="2" time="0.177996"/>
        <testcase name="it_creates_room_type_with_photos_in_room_type_folder" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomTypeServiceTest.php" line="150" class="Tests\Unit\RoomTypeServiceTest" classname="Tests.Unit.RoomTypeServiceTest" assertions="2" time="0.026620">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Unit\RoomTypeServiceTest::it_creates_room_type_with_photos_in_room_type_folder
Failed asserting that actual size 0 matches expected size 2.

/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomTypeServiceTest.php:167</failure>
        </testcase>
        <testcase name="it_updates_room_type_photos_with_cleanup" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomTypeServiceTest.php" line="178" class="Tests\Unit\RoomTypeServiceTest" classname="Tests.Unit.RoomTypeServiceTest" assertions="0" time="0.041809">
          <error type="ErrorException">Tests\Unit\RoomTypeServiceTest::it_updates_room_type_photos_with_cleanup
ErrorException: Undefined array key 0

/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Foundation/Bootstrap/HandleExceptions.php:258
/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomTypeServiceTest.php:208</error>
        </testcase>
        <testcase name="it_handles_photo_upload_limit" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomTypeServiceTest.php" line="219" class="Tests\Unit\RoomTypeServiceTest" classname="Tests.Unit.RoomTypeServiceTest" assertions="2" time="0.041269">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Unit\RoomTypeServiceTest::it_handles_photo_upload_limit
Failed asserting that actual size 0 matches expected size 10.

/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomTypeServiceTest.php:241</failure>
        </testcase>
        <testcase name="it_handles_empty_photo_array" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomTypeServiceTest.php" line="245" class="Tests\Unit\RoomTypeServiceTest" classname="Tests.Unit.RoomTypeServiceTest" assertions="1" time="0.039392"/>
      </testsuite>
      <testsuite name="Tests\Unit\RoomTypeValidationTest" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomTypeValidationTest.php" tests="2" assertions="0" errors="2" failures="0" skipped="0" time="0.100019">
        <testcase name="it_validates_photos_field_and_dynamic_photo_uploads" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomTypeValidationTest.php" line="29" class="Tests\Unit\RoomTypeValidationTest" classname="Tests.Unit.RoomTypeValidationTest" assertions="0" time="0.061720">
          <error type="Error">Tests\Unit\RoomTypeValidationTest::it_validates_photos_field_and_dynamic_photo_uploads
Error: Call to undefined method App\Http\Controllers\RoomTypeController::getRulesForUpdate()

/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomTypeValidationTest.php:43</error>
        </testcase>
        <testcase name="it_has_correct_base_rules_when_no_photos_are_provided" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomTypeValidationTest.php" line="62" class="Tests\Unit\RoomTypeValidationTest" classname="Tests.Unit.RoomTypeValidationTest" assertions="0" time="0.038299">
          <error type="Error">Tests\Unit\RoomTypeValidationTest::it_has_correct_base_rules_when_no_photos_are_provided
Error: Call to undefined method App\Http\Controllers\RoomTypeController::getRulesForUpdate()

/Users/rsa/lab/testcrm/crm-back/tests/Unit/RoomTypeValidationTest.php:71</error>
        </testcase>
      </testsuite>
      <testsuite name="Tests\Unit\Seeders\DevelopmentSeederTest" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Seeders/DevelopmentSeederTest.php" tests="5" assertions="66" errors="0" failures="2" skipped="0" time="4.475433">
        <testcase name="test_seeder_creates_students_with_avatar_files_at_correct_index" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Seeders/DevelopmentSeederTest.php" line="39" class="Tests\Unit\Seeders\DevelopmentSeederTest" classname="Tests.Unit.Seeders.DevelopmentSeederTest" assertions="21" time="0.872484"/>
        <testcase name="test_seeder_stores_avatar_files_in_storage" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Seeders/DevelopmentSeederTest.php" line="63" class="Tests\Unit\Seeders\DevelopmentSeederTest" classname="Tests.Unit.Seeders.DevelopmentSeederTest" assertions="1" time="0.748054">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Unit\Seeders\DevelopmentSeederTest::test_seeder_stores_avatar_files_in_storage
Failed asserting that false is true.

/Users/rsa/lab/testcrm/crm-back/tests/Unit/Seeders/DevelopmentSeederTest.php:76</failure>
        </testcase>
        <testcase name="test_seeder_assigns_beds_to_students" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Seeders/DevelopmentSeederTest.php" line="89" class="Tests\Unit\Seeders\DevelopmentSeederTest" classname="Tests.Unit.Seeders.DevelopmentSeederTest" assertions="32" time="0.767851"/>
        <testcase name="test_seeder_creates_proper_student_data_structure" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Seeders/DevelopmentSeederTest.php" line="116" class="Tests\Unit\Seeders\DevelopmentSeederTest" classname="Tests.Unit.Seeders.DevelopmentSeederTest" assertions="8" time="0.772171"/>
        <testcase name="test_seeder_handles_file_storage_correctly" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Seeders/DevelopmentSeederTest.php" line="137" class="Tests\Unit\Seeders\DevelopmentSeederTest" classname="Tests.Unit.Seeders.DevelopmentSeederTest" assertions="4" time="1.314872">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Unit\Seeders\DevelopmentSeederTest::test_seeder_handles_file_storage_correctly
Failed asserting that false is true.

/Users/rsa/lab/testcrm/crm-back/tests/Unit/Seeders/DevelopmentSeederTest.php:157</failure>
        </testcase>
      </testsuite>
      <testsuite name="Tests\Unit\Services\FileServiceTest" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/FileServiceTest.php" tests="13" assertions="12" errors="6" failures="0" skipped="0" time="0.591242">
        <testcase name="test_validate_file_valid_uploaded_file" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/FileServiceTest.php" line="27" class="Tests\Unit\Services\FileServiceTest" classname="Tests.Unit.Services.FileServiceTest" assertions="2" time="0.065209"/>
        <testcase name="test_validate_file_invalid_file_type" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/FileServiceTest.php" line="39" class="Tests\Unit\Services\FileServiceTest" classname="Tests.Unit.Services.FileServiceTest" assertions="2" time="0.042243"/>
        <testcase name="test_validate_file_too_large" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/FileServiceTest.php" line="51" class="Tests\Unit\Services\FileServiceTest" classname="Tests.Unit.Services.FileServiceTest" assertions="2" time="0.049558"/>
        <testcase name="test_validate_file_string_value" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/FileServiceTest.php" line="63" class="Tests\Unit\Services\FileServiceTest" classname="Tests.Unit.Services.FileServiceTest" assertions="2" time="0.042663"/>
        <testcase name="test_validate_file_null_value" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/FileServiceTest.php" line="75" class="Tests\Unit\Services\FileServiceTest" classname="Tests.Unit.Services.FileServiceTest" assertions="2" time="0.048309"/>
        <testcase name="test_validate_file_with_custom_rules" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/FileServiceTest.php" line="86" class="Tests\Unit\Services\FileServiceTest" classname="Tests.Unit.Services.FileServiceTest" assertions="2" time="0.042282"/>
        <testcase name="test_download_student_file_valid_image" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/FileServiceTest.php" line="99" class="Tests\Unit\Services\FileServiceTest" classname="Tests.Unit.Services.FileServiceTest" assertions="0" time="0.057523">
          <error type="Error">Tests\Unit\Services\FileServiceTest::test_download_student_file_valid_image
Error: Call to undefined method App\Services\FileService::downloadStudentFile()

/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/FileServiceTest.php:107</error>
        </testcase>
        <testcase name="test_download_student_file_non_existent" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/FileServiceTest.php" line="116" class="Tests\Unit\Services\FileServiceTest" classname="Tests.Unit.Services.FileServiceTest" assertions="0" time="0.041228">
          <error type="Error">Tests\Unit\Services\FileServiceTest::test_download_student_file_non_existent
Error: Call to undefined method App\Services\FileService::downloadStudentFile()

/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/FileServiceTest.php:120</error>
        </testcase>
        <testcase name="test_download_student_file_unauthorized_type" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/FileServiceTest.php" line="130" class="Tests\Unit\Services\FileServiceTest" classname="Tests.Unit.Services.FileServiceTest" assertions="0" time="0.040933">
          <error type="Error">Tests\Unit\Services\FileServiceTest::test_download_student_file_unauthorized_type
Error: Call to undefined method App\Services\FileService::downloadStudentFile()

/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/FileServiceTest.php:138</error>
        </testcase>
        <testcase name="test_download_student_file_different_image_extensions" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/FileServiceTest.php" line="148" class="Tests\Unit\Services\FileServiceTest" classname="Tests.Unit.Services.FileServiceTest" assertions="0" time="0.039292">
          <error type="Error">Tests\Unit\Services\FileServiceTest::test_download_student_file_different_image_extensions
Error: Call to undefined method App\Services\FileService::downloadStudentFile()

/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/FileServiceTest.php:158</error>
        </testcase>
        <testcase name="test_download_authenticated_file_valid" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/FileServiceTest.php" line="167" class="Tests\Unit\Services\FileServiceTest" classname="Tests.Unit.Services.FileServiceTest" assertions="0" time="0.039164">
          <error type="Error">Tests\Unit\Services\FileServiceTest::test_download_authenticated_file_valid
Error: Call to undefined method App\Services\FileService::downloadAuthenticatedFile()

/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/FileServiceTest.php:174</error>
        </testcase>
        <testcase name="test_download_authenticated_file_non_existent" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/FileServiceTest.php" line="183" class="Tests\Unit\Services\FileServiceTest" classname="Tests.Unit.Services.FileServiceTest" assertions="0" time="0.042021">
          <error type="Error">Tests\Unit\Services\FileServiceTest::test_download_authenticated_file_non_existent
Error: Call to undefined method App\Services\FileService::downloadAuthenticatedFile()

/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/FileServiceTest.php:187</error>
        </testcase>
        <testcase name="test_log_file_info" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/FileServiceTest.php" line="197" class="Tests\Unit\Services\FileServiceTest" classname="Tests.Unit.Services.FileServiceTest" assertions="0" time="0.040818"/>
      </testsuite>
      <testsuite name="Tests\Unit\Services\StudentServiceTest" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" tests="27" assertions="51" errors="4" failures="0" skipped="0" time="1.636816">
        <testcase name="test_validate_student_file_valid_uploaded_file_index_0" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="66" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="2" time="0.082883"/>
        <testcase name="test_validate_student_file_valid_uploaded_file_index_2" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="78" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="2" time="0.049067"/>
        <testcase name="test_validate_student_file_invalid_file_type_index_0" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="90" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="2" time="0.053171"/>
        <testcase name="test_validate_student_file_file_too_large_index_2" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="102" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="2" time="0.051153"/>
        <testcase name="test_validate_student_file_avatar_dimensions_too_small" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="114" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="2" time="0.051738"/>
        <testcase name="test_validate_student_file_string_value" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="126" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="2" time="0.053156"/>
        <testcase name="test_validate_student_file_null_value" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="138" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="2" time="0.052562"/>
        <testcase name="test_construct_full_name_with_both_names" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="149" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="1" time="0.048965"/>
        <testcase name="test_construct_full_name_with_extra_spaces" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="164" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="1" time="0.048639"/>
        <testcase name="test_construct_full_name_with_only_first_name" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="179" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="1" time="0.049018"/>
        <testcase name="test_construct_full_name_with_only_last_name" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="194" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="1" time="0.048778"/>
        <testcase name="test_construct_full_name_with_missing_names" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="209" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="1" time="0.048526"/>
        <testcase name="test_log_file_info" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="221" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="0" time="0.047754"/>
        <testcase name="test_create_student_with_valid_data" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="235" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="9" time="0.113794"/>
        <testcase name="test_create_student_with_bed_assignment" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="257" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="3" time="0.082253"/>
        <testcase name="test_create_student_gender_incompatible_with_dormitory" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="277" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="2" time="0.054267"/>
        <testcase name="test_update_student_with_valid_data" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="293" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="4" time="0.064832"/>
        <testcase name="test_update_student_with_bed_reassignment" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="320" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="3" time="0.101990"/>
        <testcase name="test_update_student_gender_incompatible_with_dormitory" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="342" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="2" time="0.064290"/>
        <testcase name="test_get_students_with_filters" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="367" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="0" time="0.059898">
          <error type="Illuminate\Database\UniqueConstraintViolationException">Tests\Unit\Services\StudentServiceTest::test_get_students_with_filters
Illuminate\Database\UniqueConstraintViolationException: SQLSTATE[23000]: Integrity constraint violation: 19 UNIQUE constraint failed: student_profiles.iin (Connection: sqlite, SQL: insert into "student_profiles" ("user_id", "iin", "student_id", "faculty", "specialist", "course", "year_of_study", "enrollment_year", "blood_type", "violations", "emergency_contact_name", "emergency_contact_phone", "emergency_contact_type", "emergency_contact_email", "emergency_contact_relationship", "medical_conditions", "dietary_restrictions", "program", "year_level", "nationality", "deal_number", "agree_to_dormitory_rules", "registration_limit_reached", "is_backup_list", "date_of_birth", "gender", "files", "updated_at", "created_at") values (4, 123456789012, STU42375, Engineering, Computer Science, 3, 2, 2024, B+, ?, Aaliyah Ullrich, +1-239-361-7466, guardian, eulalia.tillman@turcotte.com, Mother, Deserunt eveniet laboriosam vitae dolor., Vegan, Law, 4, Malta, ?, 1, 1, 0, 2007-10-20 07:35:36, female, "null", 2026-01-29 13:45:13, 2026-01-29 13:45:13))

/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:821
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:780
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:559
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:523
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/Processor.php:32
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php:3853
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:2235
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1436
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1401
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1240
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:370
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Collections/Traits/EnumeratesValues.php:271
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:365
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:321
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:315
/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php:539
/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php:371</error>
        </testcase>
        <testcase name="test_get_students_with_admin_user" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="388" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="0" time="0.057650">
          <error type="Illuminate\Database\UniqueConstraintViolationException">Tests\Unit\Services\StudentServiceTest::test_get_students_with_admin_user
Illuminate\Database\UniqueConstraintViolationException: SQLSTATE[23000]: Integrity constraint violation: 19 UNIQUE constraint failed: users.email (Connection: sqlite, SQL: insert into "users" ("name", "first_name", "last_name", "email", "email_verified_at", "phone_numbers", "room_id", "password", "status", "role_id", "remember_token", "dormitory_id", "updated_at", "created_at") values (Test Student, Pauline, Lang, student@test.com, ?, "[\"+1.781.804.9554\"]", ?, $2y$04$bM60yCUktfSzqFRzUhV.leLTdTrZy/0ZkC/gcn7cKc4QY/1Edw4b6, pending, 1, 74f7Xb06qJ, 2, 2026-01-29 13:45:13, 2026-01-29 13:45:13))

/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:821
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:780
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:559
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:523
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/Processor.php:32
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php:3853
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:2235
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1436
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1401
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1240
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:370
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Collections/Traits/EnumeratesValues.php:271
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:365
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:321
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:315
/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php:531
/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php:395</error>
        </testcase>
        <testcase name="test_get_student_details" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="406" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="4" time="0.058586"/>
        <testcase name="test_delete_student" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="423" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="2" time="0.058331"/>
        <testcase name="test_delete_student_frees_up_bed" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="437" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="0" time="0.056098">
          <error type="Illuminate\Database\UniqueConstraintViolationException">Tests\Unit\Services\StudentServiceTest::test_delete_student_frees_up_bed
Illuminate\Database\UniqueConstraintViolationException: SQLSTATE[23000]: Integrity constraint violation: 19 UNIQUE constraint failed: beds.room_id, beds.bed_number (Connection: sqlite, SQL: insert into "beds" ("room_id", "bed_number", "user_id", "is_occupied", "updated_at", "created_at") values (1, 2, ?, 1, 2026-01-29 13:45:13, 2026-01-29 13:45:13))

/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:821
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:780
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:559
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:523
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/Processor.php:32
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php:3853
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:2235
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1436
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1401
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1240
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:370
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Collections/Traits/EnumeratesValues.php:271
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:365
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:321
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:315
/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php:440</error>
        </testcase>
        <testcase name="test_approve_student" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="457" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="1" time="0.061739"/>
        <testcase name="test_export_students" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="471" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="2" time="0.060608"/>
        <testcase name="test_get_student_statistics" file="/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php" line="488" class="Tests\Unit\Services\StudentServiceTest" classname="Tests.Unit.Services.StudentServiceTest" assertions="0" time="0.057068">
          <error type="Illuminate\Database\UniqueConstraintViolationException">Tests\Unit\Services\StudentServiceTest::test_get_student_statistics
Illuminate\Database\UniqueConstraintViolationException: SQLSTATE[23000]: Integrity constraint violation: 19 UNIQUE constraint failed: users.email (Connection: sqlite, SQL: insert into "users" ("name", "first_name", "last_name", "email", "email_verified_at", "phone_numbers", "room_id", "password", "status", "role_id", "remember_token", "dormitory_id", "updated_at", "created_at") values (Test Student, Rene, Heidenreich, student@test.com, ?, "[\"+1-283-596-3698\"]", ?, $2y$04$bM60yCUktfSzqFRzUhV.leLTdTrZy/0ZkC/gcn7cKc4QY/1Edw4b6, pending, 1, rHxLWEsTBJ, 1, 2026-01-29 13:45:13, 2026-01-29 13:45:13))

/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:821
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:780
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:559
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:523
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/Processor.php:32
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php:3853
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:2235
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1436
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1401
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1240
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:370
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Collections/Traits/EnumeratesValues.php:271
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:365
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:321
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:315
/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php:531
/Users/rsa/lab/testcrm/crm-back/tests/Unit/Services/StudentServiceTest.php:492</error>
        </testcase>
      </testsuite>
    </testsuite>
    <testsuite name="Feature" tests="63" assertions="198" errors="4" failures="6" skipped="0" time="4.196874">
      <testsuite name="Tests\Feature\AutoPaymentCreationTest" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/AutoPaymentCreationTest.php" tests="6" assertions="22" errors="0" failures="0" skipped="0" time="0.483112">
        <testcase name="test_room_type_change_creates_pending_payments" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/AutoPaymentCreationTest.php" line="215" class="Tests\Feature\AutoPaymentCreationTest" classname="Tests.Feature.AutoPaymentCreationTest" assertions="4" time="0.150578"/>
        <testcase name="test_payment_not_created_when_user_has_no_room" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/AutoPaymentCreationTest.php" line="323" class="Tests\Feature\AutoPaymentCreationTest" classname="Tests.Feature.AutoPaymentCreationTest" assertions="1" time="0.059366"/>
        <testcase name="test_student_registration_creates_pending_payments" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/AutoPaymentCreationTest.php" line="60" class="Tests\Feature\AutoPaymentCreationTest" classname="Tests.Feature.AutoPaymentCreationTest" assertions="8" time="0.070323"/>
        <testcase name="test_no_duplicate_payments_created_on_multiple_registration_calls" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/AutoPaymentCreationTest.php" line="276" class="Tests\Feature\AutoPaymentCreationTest" classname="Tests.Feature.AutoPaymentCreationTest" assertions="1" time="0.067298"/>
        <testcase name="test_guest_registration_creates_pending_payments" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/AutoPaymentCreationTest.php" line="122" class="Tests\Feature\AutoPaymentCreationTest" classname="Tests.Feature.AutoPaymentCreationTest" assertions="4" time="0.061363"/>
        <testcase name="test_guest_new_booking_creates_pending_payments" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/AutoPaymentCreationTest.php" line="164" class="Tests\Feature\AutoPaymentCreationTest" classname="Tests.Feature.AutoPaymentCreationTest" assertions="4" time="0.074184"/>
      </testsuite>
      <testsuite name="Tests\Feature\DormitoryRegistrationTest" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/DormitoryRegistrationTest.php" tests="4" assertions="0" errors="4" failures="0" skipped="0" time="0.178056">
        <testcase name="it_returns_empty_rooms_array_when_no_rooms_have_available_beds" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/DormitoryRegistrationTest.php" line="108" class="Tests\Feature\DormitoryRegistrationTest" classname="Tests.Feature.DormitoryRegistrationTest" assertions="0" time="0.057220">
          <error type="Illuminate\Database\QueryException">Tests\Feature\DormitoryRegistrationTest::it_returns_empty_rooms_array_when_no_rooms_have_available_beds
Illuminate\Database\QueryException: SQLSTATE[HY000]: General error: 1 no such table: dormitories (Connection: sqlite, SQL: insert into "dormitories" ("name", "address", "description", "gender", "capacity", "phone", "admin_id", "updated_at", "created_at") values (Test Dormitory 697b646a19a7f, 631 Emilie Club Apt. 701
Karenborough, NC 25585-1770, Aut sapiente et qui dolores provident., male, 100, +14048847809, ?, 2026-01-29 13:45:14, 2026-01-29 13:45:14))

/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:826
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:780
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:559
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:523
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/Processor.php:32
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php:3853
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:2235
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1436
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1401
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1240
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:370
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Collections/Traits/EnumeratesValues.php:271
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:365
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:321
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:315
/Users/rsa/lab/testcrm/crm-back/tests/Feature/DormitoryRegistrationTest.php:111</error>
        </testcase>
        <testcase name="it_sets_cache_control_headers" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/DormitoryRegistrationTest.php" line="182" class="Tests\Feature\DormitoryRegistrationTest" classname="Tests.Feature.DormitoryRegistrationTest" assertions="0" time="0.040327">
          <error type="Illuminate\Database\QueryException">Tests\Feature\DormitoryRegistrationTest::it_sets_cache_control_headers
Illuminate\Database\QueryException: SQLSTATE[HY000]: General error: 1 no such table: dormitories (Connection: sqlite, SQL: insert into "dormitories" ("name", "address", "description", "gender", "capacity", "phone", "admin_id", "updated_at", "created_at") values (Test Dormitory 697b646a239a3, 40191 Krajcik Avenue
Lake Twilastad, NC 25597, Suscipit ut nesciunt voluptas consequatur., male, 100, 580.617.6320, ?, 2026-01-29 13:45:14, 2026-01-29 13:45:14))

/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:826
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:780
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:559
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:523
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/Processor.php:32
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php:3853
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:2235
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1436
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1401
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1240
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:370
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Collections/Traits/EnumeratesValues.php:271
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:365
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:321
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:315
/Users/rsa/lab/testcrm/crm-back/tests/Feature/DormitoryRegistrationTest.php:185</error>
        </testcase>
        <testcase name="it_includes_dormitory_details_in_response" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/DormitoryRegistrationTest.php" line="158" class="Tests\Feature\DormitoryRegistrationTest" classname="Tests.Feature.DormitoryRegistrationTest" assertions="0" time="0.040381">
          <error type="Illuminate\Database\QueryException">Tests\Feature\DormitoryRegistrationTest::it_includes_dormitory_details_in_response
Illuminate\Database\QueryException: SQLSTATE[HY000]: General error: 1 no such table: dormitories (Connection: sqlite, SQL: insert into "dormitories" ("name", "address", "description", "gender", "capacity", "phone", "admin_id", "updated_at", "created_at") values (Test Dormitory 697b646a2d857, 27133 Felix Squares Suite 679
Georgettemouth, DE 84752-0472, Quod incidunt ad alias sed placeat et quia., male, 100, 1-360-539-4655, ?, 2026-01-29 13:45:14, 2026-01-29 13:45:14))

/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:826
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:780
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:559
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:523
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/Processor.php:32
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php:3853
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:2235
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1436
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1401
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1240
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:370
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Collections/Traits/EnumeratesValues.php:271
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:365
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:321
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:315
/Users/rsa/lab/testcrm/crm-back/tests/Feature/DormitoryRegistrationTest.php:161</error>
        </testcase>
        <testcase name="it_returns_only_rooms_with_available_beds_for_registration" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/DormitoryRegistrationTest.php" line="17" class="Tests\Feature\DormitoryRegistrationTest" classname="Tests.Feature.DormitoryRegistrationTest" assertions="0" time="0.040128">
          <error type="Illuminate\Database\QueryException">Tests\Feature\DormitoryRegistrationTest::it_returns_only_rooms_with_available_beds_for_registration
Illuminate\Database\QueryException: SQLSTATE[HY000]: General error: 1 no such table: dormitories (Connection: sqlite, SQL: insert into "dormitories" ("name", "address", "description", "gender", "capacity", "phone", "admin_id", "updated_at", "created_at") values (Test Dormitory 697b646a37633, 6352 Kraig Estates
Bogisichberg, VA 87722-0998, Accusantium quod voluptatem at maiores sequi., male, 100, (717) 614-0369, ?, 2026-01-29 13:45:14, 2026-01-29 13:45:14))

/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:826
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:780
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:559
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Connection.php:523
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/Processor.php:32
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php:3853
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php:2235
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1436
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1401
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php:1240
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:370
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Collections/Traits/EnumeratesValues.php:271
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:365
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:321
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Factories/Factory.php:315
/Users/rsa/lab/testcrm/crm-back/tests/Feature/DormitoryRegistrationTest.php:20</error>
        </testcase>
      </testsuite>
      <testsuite name="Tests\Feature\Api\PaymentTypeTest" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/PaymentTypeTest.php" tests="5" assertions="6" errors="0" failures="4" skipped="0" time="0.271454">
        <testcase name="it_can_create_a_payment_type" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/PaymentTypeTest.php" line="62" class="Tests\Feature\Api\PaymentTypeTest" classname="Tests.Feature.Api.PaymentTypeTest" assertions="1" time="0.072434">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\Api\PaymentTypeTest::it_can_create_a_payment_type
Expected response status code [201] but received 403.
Failed asserting that 403 is identical to 201.

/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Testing/TestResponseAssert.php:45
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:174
/Users/rsa/lab/testcrm/crm-back/tests/Feature/PaymentTypeTest.php:75</failure>
        </testcase>
        <testcase name="it_can_update_a_payment_type" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/PaymentTypeTest.php" line="85" class="Tests\Feature\Api\PaymentTypeTest" classname="Tests.Feature.Api.PaymentTypeTest" assertions="1" time="0.048432">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\Api\PaymentTypeTest::it_can_update_a_payment_type
Expected response status code [200] but received 403.
Failed asserting that 403 is identical to 200.

/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Testing/TestResponseAssert.php:45
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:174
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Testing/Concerns/AssertsStatusCodes.php:16
/Users/rsa/lab/testcrm/crm-back/tests/Feature/PaymentTypeTest.php:98</failure>
        </testcase>
        <testcase name="it_can_delete_a_payment_type" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/PaymentTypeTest.php" line="103" class="Tests\Feature\Api\PaymentTypeTest" classname="Tests.Feature.Api.PaymentTypeTest" assertions="1" time="0.047467">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\Api\PaymentTypeTest::it_can_delete_a_payment_type
Expected response status code [204] but received 403.
Failed asserting that 403 is identical to 204.

/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Testing/TestResponseAssert.php:45
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:174
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Testing/Concerns/AssertsStatusCodes.php:47
/Users/rsa/lab/testcrm/crm-back/tests/Feature/PaymentTypeTest.php:111</failure>
        </testcase>
        <testcase name="it_validates_data_when_creating_a_payment_type" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/PaymentTypeTest.php" line="47" class="Tests\Feature\Api\PaymentTypeTest" classname="Tests.Feature.Api.PaymentTypeTest" assertions="1" time="0.047164">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\Api\PaymentTypeTest::it_validates_data_when_creating_a_payment_type
Expected response status code [422] but received 403.
Failed asserting that 403 is identical to 422.

/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Testing/TestResponseAssert.php:45
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:174
/Users/rsa/lab/testcrm/crm-back/tests/Feature/PaymentTypeTest.php:52</failure>
        </testcase>
        <testcase name="it_can_list_all_payment_types" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/PaymentTypeTest.php" line="35" class="Tests\Feature\Api\PaymentTypeTest" classname="Tests.Feature.Api.PaymentTypeTest" assertions="2" time="0.055956"/>
      </testsuite>
      <testsuite name="Tests\Feature\EmailAvailabilityTest" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/EmailAvailabilityTest.php" tests="8" assertions="20" errors="0" failures="0" skipped="0" time="0.406204">
        <testcase name="it_returns_error_for_missing_email" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/EmailAvailabilityTest.php" line="68" class="Tests\Feature\EmailAvailabilityTest" classname="Tests.Feature.EmailAvailabilityTest" assertions="3" time="0.061346"/>
        <testcase name="it_returns_error_for_non_existent_ignore_user_id" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/EmailAvailabilityTest.php" line="95" class="Tests\Feature\EmailAvailabilityTest" classname="Tests.Feature.EmailAvailabilityTest" assertions="3" time="0.049539"/>
        <testcase name="it_returns_true_for_an_available_email" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/EmailAvailabilityTest.php" line="25" class="Tests\Feature\EmailAvailabilityTest" classname="Tests.Feature.EmailAvailabilityTest" assertions="2" time="0.048650"/>
        <testcase name="it_returns_error_for_invalid_email_format" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/EmailAvailabilityTest.php" line="77" class="Tests\Feature\EmailAvailabilityTest" classname="Tests.Feature.EmailAvailabilityTest" assertions="3" time="0.047649"/>
        <testcase name="it_returns_true_for_an_unavailable_email_when_ignoring_its_own_user_id" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/EmailAvailabilityTest.php" line="45" class="Tests\Feature\EmailAvailabilityTest" classname="Tests.Feature.EmailAvailabilityTest" assertions="2" time="0.048966"/>
        <testcase name="it_returns_false_for_an_unavailable_email" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/EmailAvailabilityTest.php" line="34" class="Tests\Feature\EmailAvailabilityTest" classname="Tests.Feature.EmailAvailabilityTest" assertions="2" time="0.052660"/>
        <testcase name="it_returns_false_for_an_unavailable_email_when_ignoring_a_different_user_id" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/EmailAvailabilityTest.php" line="56" class="Tests\Feature\EmailAvailabilityTest" classname="Tests.Feature.EmailAvailabilityTest" assertions="2" time="0.049272"/>
        <testcase name="it_returns_error_for_invalid_ignore_user_id" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/EmailAvailabilityTest.php" line="86" class="Tests\Feature\EmailAvailabilityTest" classname="Tests.Feature.EmailAvailabilityTest" assertions="3" time="0.048122"/>
      </testsuite>
      <testsuite name="Tests\Feature\GuestPaymentSyncAndMailTest" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/GuestPaymentSyncAndMailTest.php" tests="4" assertions="16" errors="0" failures="0" skipped="0" time="0.185284">
        <testcase name="completed_to_processing_sets_guest_pending_and_queues_user_status_mail" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/GuestPaymentSyncAndMailTest.php" line="59" class="Tests\Feature\GuestPaymentSyncAndMailTest" classname="Tests.Feature.GuestPaymentSyncAndMailTest" assertions="4" time="0.054412"/>
        <testcase name="pending_to_completed_sets_guest_active_and_queues_payment_status_mail_only" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/GuestPaymentSyncAndMailTest.php" line="147" class="Tests\Feature\GuestPaymentSyncAndMailTest" classname="Tests.Feature.GuestPaymentSyncAndMailTest" assertions="4" time="0.044198"/>
        <testcase name="completed_to_pending_sets_guest_pending_and_queues_user_status_mail" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/GuestPaymentSyncAndMailTest.php" line="89" class="Tests\Feature\GuestPaymentSyncAndMailTest" classname="Tests.Feature.GuestPaymentSyncAndMailTest" assertions="4" time="0.042876"/>
        <testcase name="processing_to_completed_sets_guest_active_and_queues_payment_status_mail_only" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/GuestPaymentSyncAndMailTest.php" line="119" class="Tests\Feature\GuestPaymentSyncAndMailTest" classname="Tests.Feature.GuestPaymentSyncAndMailTest" assertions="4" time="0.043798"/>
      </testsuite>
      <testsuite name="Tests\Feature\PaymentStatusUpdateTest" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/PaymentStatusUpdateTest.php" tests="3" assertions="11" errors="0" failures="0" skipped="0" time="0.133743">
        <testcase name="it_changes_payment_status_from_pending_to_processing_when_bank_check_is_uploaded" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/PaymentStatusUpdateTest.php" line="57" class="Tests\Feature\PaymentStatusUpdateTest" classname="Tests.Feature.PaymentStatusUpdateTest" assertions="6" time="0.044863"/>
        <testcase name="it_does_not_change_status_when_payment_is_not_pending" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/PaymentStatusUpdateTest.php" line="92" class="Tests\Feature\PaymentStatusUpdateTest" classname="Tests.Feature.PaymentStatusUpdateTest" assertions="3" time="0.038947"/>
        <testcase name="it_does_not_change_status_when_admin_explicitly_sets_status" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/PaymentStatusUpdateTest.php" line="122" class="Tests\Feature\PaymentStatusUpdateTest" classname="Tests.Feature.PaymentStatusUpdateTest" assertions="2" time="0.049934"/>
      </testsuite>
      <testsuite name="Tests\Feature\StudentControllerTest" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php" tests="24" assertions="94" errors="0" failures="2" skipped="0" time="1.747737">
        <testcase name="test_create_student_with_duplicate_email_fails" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php" line="273" class="Tests\Feature\StudentControllerTest" classname="Tests.Feature.StudentControllerTest" assertions="3" time="0.097504"/>
        <testcase name="test_admin_can_list_students" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php" line="82" class="Tests\Feature\StudentControllerTest" classname="Tests.Feature.StudentControllerTest" assertions="15" time="0.070099"/>
        <testcase name="test_admin_can_filter_students_by_faculty" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php" line="114" class="Tests\Feature\StudentControllerTest" classname="Tests.Feature.StudentControllerTest" assertions="3" time="0.077196"/>
        <testcase name="test_admin_can_filter_students_by_status" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php" line="133" class="Tests\Feature\StudentControllerTest" classname="Tests.Feature.StudentControllerTest" assertions="3" time="0.073497"/>
        <testcase name="test_admin_can_search_students" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php" line="149" class="Tests\Feature\StudentControllerTest" classname="Tests.Feature.StudentControllerTest" assertions="3" time="0.079930"/>
        <testcase name="test_student_cannot_access_students_endpoint" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php" line="165" class="Tests\Feature\StudentControllerTest" classname="Tests.Feature.StudentControllerTest" assertions="1" time="0.054176"/>
        <testcase name="test_admin_can_create_student_with_valid_data" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php" line="178" class="Tests\Feature\StudentControllerTest" classname="Tests.Feature.StudentControllerTest" assertions="9" time="0.082638"/>
        <testcase name="test_admin_can_create_student_with_files" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php" line="209" class="Tests\Feature\StudentControllerTest" classname="Tests.Feature.StudentControllerTest" assertions="3" time="0.085964"/>
        <testcase name="test_admin_can_create_student_with_bed_assignment" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php" line="231" class="Tests\Feature\StudentControllerTest" classname="Tests.Feature.StudentControllerTest" assertions="3" time="0.101645"/>
        <testcase name="test_create_student_with_invalid_data_fails" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php" line="252" class="Tests\Feature\StudentControllerTest" classname="Tests.Feature.StudentControllerTest" assertions="6" time="0.059487"/>
        <testcase name="test_admin_can_view_student_details" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php" line="292" class="Tests\Feature\StudentControllerTest" classname="Tests.Feature.StudentControllerTest" assertions="10" time="0.067160"/>
        <testcase name="test_viewing_non_existent_student_returns_404" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php" line="317" class="Tests\Feature\StudentControllerTest" classname="Tests.Feature.StudentControllerTest" assertions="1" time="0.060371"/>
        <testcase name="test_admin_can_update_student" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php" line="330" class="Tests\Feature\StudentControllerTest" classname="Tests.Feature.StudentControllerTest" assertions="2" time="0.078683">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\StudentControllerTest::test_admin_can_update_student
Unable to find JSON: 

[{
    "name": "Jane Smith"
}]

within response JSON:

[{
    "data": {
        "id": 4,
        "name": "Jane Smith",
        "first_name": "Jane",
        "last_name": "Smith",
        "email": "jane.smith@test.com",
        "email_verified_at": null,
        "phone_numbers": "[\"(405) 595-1569\"]",
        "room_id": null,
        "role_id": 1,
        "created_at": "2026-01-29T13:45:16.000000Z",
        "updated_at": "2026-01-29T13:45:16.000000Z",
        "deleted_at": null,
        "student_id": null,
        "birth_date": null,
        "blood_type": null,
        "course": null,
        "faculty": null,
        "specialty": null,
        "enrollment_year": null,
        "graduation_year": null,
        "gender": null,
        "violations": null,
        "status": "pending",
        "year_of_study": null,
        "phone": null,
        "has_meal_plan": 0,
        "iin": null,
        "date_of_birth": null,
        "city_id": null,
        "files": null,
        "card_number": null,
        "dormitory_id": 1,
        "role": {
            "id": 1,
            "name": "student",
            "created_at": "2026-01-29T13:45:16.000000Z",
            "updated_at": "2026-01-29T13:45:16.000000Z"
        },
        "student_profile": {
            "id": 1,
            "user_id": 4,
            "iin": "317860458971",
            "student_id": "STU88304",
            "faculty": "medicine",
            "specialist": "Marketing",
            "course": "4",
            "year_of_study": 4,
            "enrollment_year": 2023,
            "enrollment_date": null,
            "blood_type": "B+",
            "violations": null,
            "emergency_contact_name": "Salvatore Bailey DDS",
            "emergency_contact_phone": "+1 (812) 465-0769",
            "emergency_contact_relationship": "Uncle",
            "medical_conditions": null,
            "dietary_restrictions": null,
            "program": "Computer Science",
            "year_level": 3,
            "nationality": "Slovenia",
            "deal_number": "DEAL33019",
            "agree_to_dormitory_rules": false,
            "registration_limit_reached": false,
            "is_backup_list": false,
            "date_of_birth": "2005-03-16 08:26:44",
            "gender": "female",
            "files": "null",
            "city_id": null,
            "created_at": "2026-01-29T13:45:16.000000Z",
            "updated_at": "2026-01-29T13:45:16.000000Z",
            "country": null,
            "region": null,
            "city": null,
            "allergies": null,
            "emergency_contact_type": "parent",
            "emergency_contact_email": "ahauck@carroll.biz",
            "identification_type": null,
            "identification_number": null
        },
        "room": null,
        "student_bed": null
    },
    "warning": null
}].


Failed asserting that an array has the subset Array &amp;0 [
    'name' =&gt; 'Jane Smith',
].
--- Expected
+++ Actual
@@ @@
     'student_bed' =&gt; NULL,
   ),
   'warning' =&gt; NULL,
-  'name' =&gt; 'Jane Smith',
 )

/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Testing/Constraints/ArraySubset.php:80
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Testing/Assert.php:36
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Testing/AssertableJsonString.php:319
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:856
/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php:348</failure>
        </testcase>
        <testcase name="test_admin_can_update_student_bed_assignment" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php" line="360" class="Tests\Feature\StudentControllerTest" classname="Tests.Feature.StudentControllerTest" assertions="3" time="0.095206"/>
        <testcase name="test_update_student_with_invalid_data_fails" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php" line="385" class="Tests\Feature\StudentControllerTest" classname="Tests.Feature.StudentControllerTest" assertions="4" time="0.065404"/>
        <testcase name="test_admin_can_delete_student" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php" line="408" class="Tests\Feature\StudentControllerTest" classname="Tests.Feature.StudentControllerTest" assertions="3" time="0.065076"/>
        <testcase name="test_deleting_non_existent_student_returns_404" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php" line="424" class="Tests\Feature\StudentControllerTest" classname="Tests.Feature.StudentControllerTest" assertions="1" time="0.055226"/>
        <testcase name="test_admin_can_export_students" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php" line="437" class="Tests\Feature\StudentControllerTest" classname="Tests.Feature.StudentControllerTest" assertions="4" time="0.066161"/>
        <testcase name="test_admin_can_export_students_with_filters" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php" line="452" class="Tests\Feature\StudentControllerTest" classname="Tests.Feature.StudentControllerTest" assertions="3" time="0.075376"/>
        <testcase name="test_admin_can_approve_student" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php" line="474" class="Tests\Feature\StudentControllerTest" classname="Tests.Feature.StudentControllerTest" assertions="3" time="0.069887"/>
        <testcase name="test_approving_already_active_student" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php" line="491" class="Tests\Feature\StudentControllerTest" classname="Tests.Feature.StudentControllerTest" assertions="2" time="0.067363"/>
        <testcase name="test_admin_can_list_all_students" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php" line="507" class="Tests\Feature\StudentControllerTest" classname="Tests.Feature.StudentControllerTest" assertions="4" time="0.068838"/>
        <testcase name="test_unauthenticated_user_cannot_access_student_endpoints" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php" line="528" class="Tests\Feature\StudentControllerTest" classname="Tests.Feature.StudentControllerTest" assertions="1" time="0.063202">
          <failure type="PHPUnit\Framework\ExpectationFailedException">Tests\Feature\StudentControllerTest::test_unauthenticated_user_cannot_access_student_endpoints
Expected response status code [401] but received 200.
Failed asserting that 200 is identical to 401.

/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Testing/TestResponseAssert.php:45
/Users/rsa/lab/testcrm/crm-back/vendor/laravel/framework/src/Illuminate/Testing/TestResponse.php:174
/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php:531</failure>
        </testcase>
        <testcase name="test_student_cannot_manage_other_students" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentControllerTest.php" line="544" class="Tests\Feature\StudentControllerTest" classname="Tests.Feature.StudentControllerTest" assertions="4" time="0.067649"/>
      </testsuite>
      <testsuite name="Tests\Feature\StudentEmergencyContactTest" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentEmergencyContactTest.php" tests="9" assertions="29" errors="0" failures="0" skipped="0" time="0.791284">
        <testcase name="test_identification_type_validation_rejects_invalid_values" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentEmergencyContactTest.php" line="263" class="Tests\Feature\StudentEmergencyContactTest" classname="Tests.Feature.StudentEmergencyContactTest" assertions="3" time="0.099833"/>
        <testcase name="test_emergency_contact_type_validation_rejects_invalid_values" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentEmergencyContactTest.php" line="136" class="Tests\Feature\StudentEmergencyContactTest" classname="Tests.Feature.StudentEmergencyContactTest" assertions="3" time="0.055173"/>
        <testcase name="test_identification_fields_are_required_for_registration" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentEmergencyContactTest.php" line="293" class="Tests\Feature\StudentEmergencyContactTest" classname="Tests.Feature.StudentEmergencyContactTest" assertions="6" time="0.063754"/>
        <testcase name="test_student_update_accepts_identification_fields" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentEmergencyContactTest.php" line="198" class="Tests\Feature\StudentEmergencyContactTest" classname="Tests.Feature.StudentEmergencyContactTest" assertions="2" time="0.068141"/>
        <testcase name="test_student_update_accepts_new_emergency_contact_fields" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentEmergencyContactTest.php" line="66" class="Tests\Feature\StudentEmergencyContactTest" classname="Tests.Feature.StudentEmergencyContactTest" assertions="2" time="0.069826"/>
        <testcase name="test_student_registration_accepts_identification_fields" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentEmergencyContactTest.php" line="165" class="Tests\Feature\StudentEmergencyContactTest" classname="Tests.Feature.StudentEmergencyContactTest" assertions="2" time="0.080454"/>
        <testcase name="test_student_registration_accepts_new_emergency_contact_fields" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentEmergencyContactTest.php" line="21" class="Tests\Feature\StudentEmergencyContactTest" classname="Tests.Feature.StudentEmergencyContactTest" assertions="4" time="0.076819"/>
        <testcase name="test_emergency_contact_type_validation_accepts_valid_values" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentEmergencyContactTest.php" line="102" class="Tests\Feature\StudentEmergencyContactTest" classname="Tests.Feature.StudentEmergencyContactTest" assertions="3" time="0.126118"/>
        <testcase name="test_identification_type_validation_accepts_valid_values" file="/Users/rsa/lab/testcrm/crm-back/tests/Feature/StudentEmergencyContactTest.php" line="230" class="Tests\Feature\StudentEmergencyContactTest" classname="Tests.Feature.StudentEmergencyContactTest" assertions="4" time="0.151166"/>
      </testsuite>
    </testsuite>
  </testsuite>
</testsuites>
